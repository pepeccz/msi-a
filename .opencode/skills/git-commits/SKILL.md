---
name: git-commits
description: >
  Creates clean git commits following Conventional Commits without AI markers.
  Trigger: When committing changes, after completing tasks, or user asks to commit.
metadata:
  author: msi-automotive
  version: "1.0"
  scope: [root]
  auto_invoke: "Creating git commits"
---

## When to Use

- After completing a task that modified files
- When user explicitly asks to commit changes
- After fixing build/test errors
- Before switching to a different task

---

## Workflow (Semi-automatic)

```
1. Analyze    → git status, git diff, git log -3
2. Generate   → Create commit message following this skill
3. SHOW       → Present proposed commit to user
4. WAIT       → Get explicit approval before executing
5. Execute    → git add + git commit only after approval
```

**CRITICAL**: NEVER execute `git commit` without showing the message first and getting user approval.

---

## Conventional Commits Format

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

### Types

| Type | Use For |
|------|---------|
| `feat` | New feature or capability |
| `fix` | Bug fix |
| `docs` | Documentation only |
| `style` | Code style (formatting, semicolons) |
| `refactor` | Code change that neither fixes nor adds |
| `test` | Adding or updating tests |
| `chore` | Maintenance, dependencies, configs |
| `perf` | Performance improvement |
| `ci` | CI/CD changes |
| `build` | Build system or dependencies |

### Scopes for MSI-a

| Scope | Directory |
|-------|-----------|
| `agent` | agent/ |
| `api` | api/ |
| `admin` | admin-panel/ |
| `db` | database/ |
| `shared` | shared/ |
| `docker` | docker/, docker-compose.yml |
| `skills` | skills/ |
| `docs` | README, AGENTS.md |

---

## Prohibited AI Markers

**NEVER include these in commit messages:**

### Brand Names
- Claude, Anthropic
- GPT, OpenAI, ChatGPT
- Gemini, Google AI
- Copilot, GitHub Copilot
- Any AI model or company name

### Attribution Phrases
- "Generated by..."
- "Created by..."
- "Written by..."
- "Produced by..."
- "Co-authored-by:" (with AI reference)
- "Assisted by..."
- "With help from..."
- "Using..."

### Technical Terms
- AI, A.I., artificial intelligence
- LLM, language model
- Assistant, chatbot, bot
- Machine learning, ML
- Neural network

### Meta-references
- "This commit was..."
- "I am an AI..."
- "As an AI..."
- Any self-reference to being non-human

---

## Message Guidelines

### DO
- Use imperative mood: "add", "fix", "update" (not "added", "fixed")
- Keep first line under 72 characters
- Focus on WHAT changed and WHY
- Be specific and concise
- Write in English

### DON'T
- Don't explain WHO made the change
- Don't use past tense
- Don't start with capital letter after colon
- Don't end with period
- Don't be vague ("update files", "fix stuff")

---

## MSI-a Examples

### Agent

```
feat(agent): add vehicle type identification tool
fix(agent): resolve tier calculation for multiple elements
refactor(agent): simplify case collection FSM transitions
test(agent): add unit tests for tarifa_service
```

### API

```
feat(api): add regulatory document upload endpoint
fix(api): handle Chatwoot webhook timeout gracefully
chore(api): update FastAPI to 0.116.1
refactor(api): extract RAG query logic to service
```

### Admin Panel

```
feat(admin): add tariff tier management page
fix(admin): resolve dialog close animation glitch
style(admin): adjust table column widths for readability
chore(admin): update React to 19.2.3
```

### Database

```
feat(db): add DocumentChunk model for RAG
fix(db): add missing index on conversation_id
chore(db): create migration for regulatory documents
refactor(db): normalize element-warning relationship
```

### Documentation

```
docs: update README with RAG system section
docs(skills): add git-commits skill
chore(docs): fix typos in AGENTS.md
```

---

## Pre-Commit Checklist

Before suggesting a commit, verify:

```
[ ] Ran git status - know what files changed
[ ] Ran git diff - understand actual changes
[ ] Message follows: <type>(<scope>): <description>
[ ] First line is <= 72 characters
[ ] Uses imperative mood ("add" not "added")
[ ] Scope matches affected component
[ ] Description is specific, not vague
[ ] NO AI/model references anywhere
[ ] NO attribution phrases
[ ] NO brand names (Claude, GPT, etc.)
```

---

## Suggesting a Commit

When suggesting, format like this:

```
Proposed commit:

  git add <files>
  git commit -m "<type>(<scope>): <description>"

Changes included:
- <summary of change 1>
- <summary of change 2>

Approve? (yes/no/edit)
```

---

## Critical Rules

- **ALWAYS** analyze `git diff` before writing commit message
- **ALWAYS** show proposed commit to user before executing
- **ALWAYS** wait for explicit approval ("ok", "yes", "adelante", "hazlo")
- **ALWAYS** use Conventional Commits format
- **ALWAYS** write messages as if you were a human developer
- **NEVER** execute `git commit` without user confirmation
- **NEVER** include AI markers, brand names, or attribution phrases
- **NEVER** mention Claude, GPT, AI, LLM, or any model
- **NEVER** use vague descriptions ("fix bug", "update code")
- **NEVER** commit sensitive files (.env, credentials, secrets)

---

## Resources

- [Conventional Commits](https://www.conventionalcommits.org/)
- [Git Commit Best Practices](https://cbea.ms/git-commit/)
